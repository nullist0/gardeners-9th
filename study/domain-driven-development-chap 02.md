어렵게 구성한 도메인 모델에 관한 개념은 개발에서의 개념으로 그쳐서는 안된다. **의사소통 수단에 스며들 필요가 있다**.

# Ubiquitous Language - 보편 언어

---

우리는 두가지 사실을 알아야 한다.

- 도메인 전문가도 도메인 지식을 명료하게 정확한 인식을 갖고 있지는 않다.
- 기술 전문가는 도메인 전문가보다 훨씬 도메인에 대해 알지 못한다.

서로가 사용하는 언어가 전혀 다르기때문에 생기는 커뮤니케이션 비용이 매우 많이 드는데, 이것뿐만이 문제가 아니다.

- 명료하지 못한 언어는 두 팀간의 이해를 상이하게 만들 수 있다.
- 이해가 달라지면 도메인의 구현이 잘못될 수 있다.

두 팀이 공통의 언어를 사용하면 언어에서 잘못된 점을 손쉽게 알아내고 명료한 모델을 만들 수 있다. 즉, **모델과 보편언어는 동일하다는 점을 인식하라**.

# 크게 소리내어 모델링하기

---

우리가 서로 같은 목적으로 서로 다른 언어를 사용할 때 아래와 같은 현상이 일어난다.

> 공통 언어가 없다면 그들은 혼성어를 만들어 낸다. 혼성어는 화자가 원래 쓰는 언어만큼 포괄적이지는 못하지만 당면한 문제에 쓰기에는 적당하다. 이야기를 나눌 때 사람들은 자연스럽게 단어의 해석과 의미에서 차이를 발견하고 수월하게 그러한 차이를 해소한다. 즉, 언어상 껄끄러운 부분을 찾아내서 부드럽게 만드는 것이다. - 스티븐 핑거의 언어본능

사람은 이정도로 말에서 애매모호한 부분을 잘 찾는다. 고로 명확한 모델링을 찾기 위해서는 크게 소리내어 모델링하는 것이 좋다!

# 한 팀, 한 언어

---

한 팀에서 언어가 하나로 모여지지 않는 이유가 무엇일까? 기술 담당자의 입장에서 원인을 확인해보자.

- 업무 전문가들에게는 너무 추상적이라서
- 업무 전문가들은 객체를 이해하지 못해서
- 업무 전문가들이 쓰는 용어로 된 요구사항을 만들어야 해서

기술적인 문제는 그럴 수 있겠지만 도메인에 관한 문제에 대해 이렇게 판단할 수 있는가? 다음과 같은 질문을 생각해봐라.

- 추상화가 잘 되어 있는지 도메인 전문가가 아닌데 판단할 수 있는가?
- 도메인 전문가보다 도메인을 더 많이 이해하고 있는가?

당연한 결론이지만, **도메인 전문가도 해당 모델을 이해하지 못한다면 모델이 잘못된 것**이다.

## 새로운 언어의 발견

도메인 전문가가 기술 전문가끼리 논의하면 어떤 장점이 있는가?

- 도메인 전문가는
    - 모델의 요건과 도메인의 지식 사이에서 틀린 부분을 손쉽게 지적한다
    - 모델에서 모순되거나 모호한 부분을 곧바로 알 수 있다.
    - 모델 언어로 유스케이스를 작성할 수 있다.
    - 인수 테스트를 구체화함으로써 모델을 직접적으로 다룰 수 있다.
- 두 전문가는 서로 모델을 시험해볼 수 있다.
    - 프레임워크나 기술적 조건에 부합하는 모델이기 때문에 아무런 문제가 없다.

# 문서와 다이어그램

---

모델의 구조를 설명하는데에 있어 다이어그램으로 설명하는 것이 효율적일 수 있는데 UML 다이어그램에는 둘을 설명할 수 없다는 문제가 있다.

- 모델이 나타내는 개념의 의미
- 모델 내 객체의 행위

UML을 다루는 관점에서 **프로그래밍 언어와 동일한 언어로 바라본다면 모든 설명을 다이어그램으로 대체**할 수 있겠지만, 너무 많은 노력이 필요하므로 **대개 설명을 보조하는 용도로 사용되기 나름**이다. 의사소통으로써 UML을 사용하는 경우, 아래와 같이 사용하는 것이 좋다.

- 모델의 중요가치는 보편언어를 이용하여 서술하고
- 설계의 생생한 세부사항은 코드를 통해 구현하며
- 코드가 모델과 동일하도록

다시 말하지만…

> **모델은 다이어그램이 아니라는 점을 항상 명심해야 한다.**


## 글로 쓴 설계 문서에 대한 평가법

문서로 내용을 설명하는 것이 좋지만 설계 문서를 사용할 때 문제가 종종 발생한다.

> 문서가 변하지 않게 되면 코드의 발전이나 프로젝트 언어의 발전에 뒤쳐저 불일치가 커진다.


여기서는 문서의 **평가 기준**을 소개하고자 한다.

### 문서는 코드와 말을 보완하는 역할을 해야 한다

익스트림 프로그래밍으로부터, 

- 코드 스스로 별도의 설명이 필요없는 상태를 유지해야 한다.
- 프로그램의 실제 동작하는 영역과 실행가능한 테스트에만 집중한다.

하지만 코드로만 모델을 유지시키는 것은

- 문서와 다이어그램도 프로그램의 행위에 영향을 주지 않아 일관성을 잃기 쉽다.
- 코드로는 행위 이면에 존재하는 의미를 알려주기 어렵다.
- 애초에 모델을 이해해야 하는 사람은 개발자만 있는 것이 아니다.

그렇지만 **문서는 코드가 이미 잘 하고 있는 세부사항에 관한 내용을 작성해서는 안된다**.

### 문서는 유효한 상태를 유지하고 최신 내용을 담고 있어야 한다

앞서 말했듯이 문서가 최신상태를 유지하지 못할 수 있는데, 이러한 이유는 보편 언어에서 찾을 수 있다.

- 문서가 보편 언어에 아무런 영향을 주지 않는다면 문서가 불필요할 수 있다.
- 보편언어가 변경하는데 문서를 유지되지 않는다면 문서의 중요성이 떨어지는 것일 수 있다.

최신 내용이 유지되려면 문서는 언제나 업데이트되어야 하는 필요가 있는 내용이어야 한다. 예를 들어

- 보편언어로 작성한 요구사항 명세
- 보편언어로 작성된 시나리오

결과적으로 모델 이면에 놓인 업무 지식을 명세에서 전달할 필요가 없어져 명세를 더 간략하게 서술할 수 있게 된다.

## 실행 가능한 기반

도메인을 코드로 작성하기 위해 보편언어로 작성된 시나리오와 코드를 최대한 불일치가 없도록 작성해야 한다. 이러한 목적으로 **선언적 설계**와 같은 접근법으로 해결할 수 있다. 물론 특정한 사고방식이 필요하다.

# 설명을 위한 모델

---

이 책에서 전체적인 흐름으로 **하나의 모델로 구현, 설계, 의사소통의 기초**를 모두 아우르도록 하는 것이다. 하지만 교육이나 설명을 목적으로 **여러 모델**들을 구조화 할 수 있다. 설명을 목표로 하는 모델이라면 UML 보다는 그때 필요한 모델을 사용하는 것이 매우 좋다.